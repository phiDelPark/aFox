!function(t){"use strict";var e='<form action="%s" class="input-password" method="post" autocomplete="off"><div class="form-inline"><div>%s</div><input class="form-control" name="mb_password" type="password" placeholder="%s" style="width:150px" required> <button class="btn btn-primary" type="submit">%s</button> <button class="btn btn-default" type="button">%s</button></div></form>';t("[data-exec-act]").click(function(){var r={},a=t(this),n=a.attr("data-exec-act"),o=a.attr("data-act-param");if(!o)return!1;for(var s=0,i=(o=o.split(",")).length;s<i;s+=2)r[o[s]]=o[s+1];var d=a.closest("#board_reply"),c=a.closest(".reply-item"),u=a.attr("data-act-password")||"";d.find("form.right").remove().end().find(".reply-item>.right").show();var l=d.find('[data-exec-ajax="board.updateComment"]').clone().hide(),p=l.find(".af_editor_rp_content").afEditor();l.find(".form-group").show(),l.find('[disabled="disabled"]').removeAttr("disabled");var f=function(e,r,a){if("success"==e){t('<input type="hidden" name="rp_srl" value="">').prependTo(l);var n=c.find(">.right");return"0"===r.mb_srl&&(l.find(".area-mbinfo").find('[name="mb_nick"],[name="mb_password"]').attr("required","required").end().removeClass("hide"),l.find(".af-editor-toolbar,.af-editor-content>textarea,.af-editor-content>iframe").removeAttr("readonly")),l[0].dataImport(r),l.addClass("right").find(".close").show().click(function(){n.show("fast",function(){l.remove()})}).end().insertAfter(n.hide("slow")).show("slow"),l.find(".btn-success").removeClass("btn-success").addClass("btn-info"),2==r.rp_type&&p.switch(!0),c[0].scrollIntoView(!0),!1}};if("board.deleteComment"==n||"board.getComment"==n&&u){var m,_=encodeURIComponent(current_url.setQuery("rp",""));if(c.find(">>.inside_massage_box").length>0)return!1;u?"board.getComment"==n?(m=t(e.sprintf("",$_LANG.request_input.sprintf($_LANG.password),$_LANG.password,$_LANG.ok,$_LANG.close))).on("success.exec.ajax",function(t,e,r){t.preventDefault(),f("success",e)}):m=t(e.sprintf("",$_LANG.confirm_select_delete.sprintf($_LANG.comment),$_LANG.password,$_LANG.ok,$_LANG.close)):m=t('<form action="%s" class="input-group" method="post" autocomplete="off"><div><div>%s</div><button class="btn btn-primary" type="submit">%s</button> <button class="btn btn-default" type="button">%s</button></div></form>'.sprintf("",$_LANG.confirm_select_delete.sprintf($_LANG.comment),$_LANG.yes,$_LANG.no)),m.hide().addClass("inside_massage_box").prependTo(c.find(">.right")).fadeIn("slow"),m.find("button.btn-default").click(function(){m.fadeOut("slow",function(){t(this).remove()})}).focus(),m.attr("data-exec-ajax",n),m.prepend('<input type="hidden" name="rp_srl" value="'+r.rp_srl+'">'),m.prepend('<input type="hidden" name="success_return_url" value="'+_+'">'),m.addClass("inside_massage_box").prependTo(c.find(">.right")).fadeIn("slow",function(){var e=t(this).find('[name="mb_password"]');e.length>0&&e.focus()})}else"board.getComment"!=n&&"board.updateComment"!=n||("board.getComment"==n?exec_ajax(n,r,f):(p.switch(!1),t('<input type="hidden" name="rp_parent" value="">').prependTo(l),l[0].dataImport({rp_type:1,rp_secret:0,rp_content:"",rp_parent:r.rp_parent}),l.addClass("right").insertAfter(c.find(">.right")).show("slow")));return l.on("success.exec.ajax",function(t,e,r){t.preventDefault(),e.redirect_url&&parent.location.replace(e.redirect_url.setQuery("rp",e.rp_srl))}),!1}),t('[data-exec-ajax="board.updateDocument"],[data-exec-ajax="board.updateComment"]').on("success.exec.ajax",function(e,r,a){e.preventDefault();var n="board.updateDocument"==t(this).attr("data-exec-ajax");r.redirect_url&&parent.location.replace(r.redirect_url.setQuery(n?"srl":"rp",r[n?"wr_srl":"rp_srl"]))}),t(document).on("change.af.editor.toolbar",".af-editor-toolbar",function(e,r,a,n){var o=t(this).closest(".af-editor-group");"wr_type"!=r&&"rp_type"!=r||1!=o.length||o.data("af.editor").switch("2"===n)}),t(".auto-hide").each(function(){var e=t(this),r=(e.attr("data-timer")||"5")-1,a=e.find(".timer-progress")||0,n=a.attr("data-repeat-char")||"*",o=r,s=0,i=function(){var t=n.repeat(o);return t=t+"<u>"+n+"</u>"+n.repeat(r-o)};a&&a.html(i()),s=setInterval(function(){o<1?(clearInterval(s),e.animate({bottom:"-=70"},1e3,function(){t(this).remove()})):(o--,a&&a.html(i()))},1e3)}),t(".list-table tr[data-hot-track]").click(function(){var e=t(".wr_title a",this),r=e.attr("href");return"#"==r&&"#passwordBoxModal"==e.attr("data-target")?t(e.attr("data-target")).modal("show",e):location.href=r,!1}),t("#passwordBoxModal","#board_list").on("show.bs.modal",function(e){if(void 0===e.relatedTarget)return e.preventDefault(),!1;var r=t(this),a=r.find("form"),n=t(e.relatedTarget),o=n.attr("data-srl")||"",s=(n.attr("data-param")||"").split(","),i=current_url;o&&s.length>1&&(i=i.setQuery(s),a.on("submit",function(){if(a.data("check success"))return!0;var t={},e=["mb_password"];return t.wr_srl=o,t.mb_password=r.find('input[name="mb_password"]').val(),exec_ajax("board.checkpassword",t,function(t,e,r){if(a.data("check success","success"===t),"success"===t)return a.submit(),!1},e),!1}).attr("action",i))}).on("shown.bs.modal",function(e){t(this).find('[name="mb_password"]').focus()}),t(window).on("load",function(){var e=t("a.active[id^=reply_]")[0];e&&e.scrollIntoView(!0)})}(jQuery);