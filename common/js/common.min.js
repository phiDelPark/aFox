if("undefined"==typeof bootstrap)throw document.getElementById("defBootstrapJS")||parent.location.replace(request_uri+"?cdnerr=bootstrap"),new Error("aFox's JavaScript requires Bootstrap 5");const $_LANG={};Number.prototype.shortSize=function(){let e=this,t=0;for(let n=4;t<n&&!(e<=1024);t++)e/=1024;return e.toFixed(1)+["B","K","M","G","T"][t]},String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.toUcFirst=function(){let e=this.toLowerCase();return e.charAt(0).toUpperCase()+e.slice(1)},String.prototype.sprintf=function(){let e=this,t=arguments;t=1===t.length&&"object"==typeof t[0]?t[0]:t;for(let n=0,r=t.length;n<r;n++)e=e.replace(/%([0-9]?)(s|d)/,(function(e,r,o){let i=t[n]+"";if(Number(r||0)>0){let e="d"==o?"0":"_";for(;i.length<r;)i=e+i}return i}));return e},String.prototype.nl2br=function(e){return this.replace(/\r\n|\n\r|\r|\n/g,e||"<br>")},String.prototype.stripTags=function(e){e=(((e||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");return this.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,"").replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,(function(t,n){return e.indexOf("<"+n.toLowerCase()+">")>-1?t:""}))},String.prototype.escapeMKDW=function(e){const t=!1===e?/[\`\[\]]/g:/[\\\`\*\_\{\}\[\]\(\)\>\#\+\-\.\!]/g;return this.replace(t,(function(e){return"\\"+e}))},String.prototype.escapeHtml=function(){const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return this.replace(/[&<>"'\/]/g,(function(t){return e[t]}))},String.prototype.unescapeHtml=function(){const e={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#x2F;":"/"};return this.replace(/&[^;]+;/g,(function(t){return e[t]}))},String.prototype.getQuery=function(e){let t={};return decodeURIComponent(this).replace(/&amp;/g,"&").replace(/[?&]+([^=&]+)=([^&]*)/g,(function(e,n,r){t[n]=r})),e?t[e]||"":t},String.prototype.setQuery=function(){let e=arguments,t=e.length;const n=decodeURIComponent(this).replace(/&amp;/g,"&");if(0===t)return n;"object"==typeof e[0]&&(e=e[0],t=e.length);let r,o=""!==e[0]?n.getQuery():{},i=[];for(var a=""===e[0]?1:0;a<t;a+=2)o[e[a]]=e[a+1];for(var c in o)o.hasOwnProperty(c)&&(r=String(o[c]).trim())&&i.push(c+"="+r);let l=n.indexOf("?"),s=-1==l?n:n.substr(0,l);return"/"!=s.substr(-1,1)&&(s+="/"),s+(i.length>0?"?"+i.join("&"):"")},HTMLFormElement.prototype.serializeArray=function(){let e=[];return Array.prototype.slice.call(this.elements).forEach((function(t){!t.name||t.disabled||["file","reset","submit","button"].indexOf(t.type)>-1||("select-multiple"!==t.type?["checkbox","radio"].indexOf(t.type)>-1&&!t.checked||e.push({name:t.name,value:t.value}):Array.prototype.slice.call(t.options).forEach((function(n){n.selected&&e.push({name:t.name,value:n.value})})))})),e},HTMLFormElement.prototype.dataExport=function(){let e,t,n={},r=this.serializeArray();for(let o in r)e=r[o].name,t=r[o].value,"[]"===e.substring(e.length-2)?(e=e.slice(0,-2),Array.isArray(n[e])||(n[e]=[]),n[e][n[e].length]=t):n[e]=t;return n},HTMLFormElement.prototype.dataImport=function(e){let t;for(let n in e)t=this.elements[n],t&&t.name&&("INPUT"==t.tagName?"file"==t.type||("checkbox"==t.type?t.checked=1==e[n]:"radio"==t.type?(t=t.find((t=>t.value===e[n])))&&(t.checked=!0):t.value="0"==e[n]?"":e[n]):["select","textarea"].indexOf(t.type)>-1&&(t.value=e[n]))},HTMLElement.prototype.fadeOut=function(e,t=50){let n=this,r=1;n.timer=setInterval((()=>{r-=.1,n.style.opacity=r,r<=0&&(clearInterval(n.timer),e(n))}),t)},HTMLElement.prototype.fadeIn=function(e,t=50){let n=this,r=0;n.timer=setInterval((()=>{r+=.1,n.style.opacity=r,r>=1&&(clearInterval(n.timer),e(n))}),t)},window.setCookie=function(e,t,n){const r=new Date;r.setDate(r.getDate()+n),document.cookie=e+"="+encodeURIComponent(t)+(null==n?"":"; expires="+r.toUTCString())},window.getCookie=function(e,t=!1){let n,r,o=document.cookie.split(";");for(let i=0;i<o.length;i++)if(n=o[i].slice(0,o[i].indexOf("=")),r=o[i].slice(o[i].indexOf("=")+1),n=n.replace(/^\s+|\s+$/g,""),n==e)return t&&setCookie(e,"",-1),decodeURIComponent(r)},window.exec_ajax=async function(e,t={}){const n={method:"POST",headers:{"Content-Type":"application/json",...t},body:JSON.stringify(e)},r=await fetch(request_uri,n),o=await r.json();if(!r.ok||0!==(o?.error||0))throw Error(o?.message||o);return o},window.load_script=function(e,t,n,r){return new Promise(((o,i)=>{let a=document.createElement("script");const c=t||document.getElementsByTagName("script")[0];function l(e,t){(t||!a.readyState||/loaded|complete/.test(a.readyState))&&(a.onload=null,a.onreadystatechange=null,a=void 0,t?i():o())}a.async=n||!0,a.defer=r||!0,a.onload=l,a.onreadystatechange=l,a.src=e,c.parentNode.insertBefore(a,c.nextSibling)}))},window.pop_win=function(e,t,n,r){const o=window.open(e,r||"afox_popup","width="+(t||"700")+",height="+(n||"500")+",top=50,left=50,scrollbars=yes,toolbar=no,menubar=no,location=no");return o.focus(),o};