window.addEventListener("load",()=>{document.querySelector("#galleryContentModal")?.addEventListener("show.bs.modal",e=>{let t=e.target.querySelector(".carousel-inner"),r=e.relatedTarget.href.getQuery(),l=e.relatedTarget.closest(".list-group"),a=e.relatedTarget.querySelector("img")?.src.getQuery("file"),i=l.querySelectorAll("img"),o="";i.forEach(e=>{o+=e.src.getQuery("file")+","}),exec_ajax({module:"gallery",act:"getFiles",md_id:r.id,mf_srls:o}).then(e=>{let r=[];e.forEach((e,t)=>{r[t]='<div class="carousel-item%s">%s<img src="%s" class="d-block w-100" alt="%s" loading="lazy"></div>'.sprintf(a==e.mf_srl?" active":"","<h6>"+(e.mf_name||"")+", "+(e.mf_regdate||"")+"</h6>","./?file="+e.mf_srl,e.mf_name)}),t.innerHTML=r.join("")}).catch(e=>console.log(e))}),document.getElementById("carouselGallery")?.addEventListener("slide.bs.carousel",function(e){if(0==e.from&&"right"==e.direction||0==e.to&&"left"==e.direction){e.preventDefault(),e.stopPropagation();let t=document.getElementById("paginationGallery").querySelectorAll("li.page-number");confirm($_LANG["confirm_page_"+e.direction]).then(()=>{t.forEach((r,l)=>{if(r.hasAttribute("selected")){t["left"==e.direction?l+1:l-1]?.querySelector("a").click();return}})}).catch(e=>console.log(e))}})});