if("undefined"==typeof bootstrap)throw document.getElementById("defBootstrapJS")||parent.location.replace(request_uri+"?cdnerr=bootstrap"),new Error("aFox's JavaScript requires Bootstrap 5");const $_LANG={};(()=>{"use strict";Number.prototype.shortSize=function(){let e=this,t=0;for(let r=4;t<r&&!(e<=1024);t++)e/=1024;return e.toFixed(1)+["B","K","M","G","T"][t]},String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.toUcFirst=function(){let e=this.toLowerCase();return e.charAt(0).toUpperCase()+e.slice(1)},String.prototype.sprintf=function(){let e=this,t=arguments;t=1===t.length&&"object"==typeof t[0]?t[0]:t;for(let r=0,n=t.length;r<n;r++)e=e.replace(/%([0-9]?)(s|d)/,(function(e,n,o){let i=t[r]+"";if(Number(n||0)>0){let e="d"==o?"0":"_";for(;i.length<n;)i=e+i}return i}));return e},String.prototype.nl2br=function(e){return this.replace(/\r\n|\n\r|\r|\n/g,e||"<br>")},String.prototype.stripTags=function(e){e=(((e||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");return this.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,"").replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,(function(t,r){return e.indexOf("<"+r.toLowerCase()+">")>-1?t:""}))},String.prototype.escapeMKDW=function(e){const t=!1===e?/[\`\[\]]/g:/[\\\`\*\_\{\}\[\]\(\)\>\#\+\-\.\!]/g;return this.replace(t,(function(e){return"\\"+e}))},String.prototype.escapeHtml=function(){const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return this.replace(/[&<>"'\/]/g,(function(t){return e[t]}))},String.prototype.unescapeHtml=function(){const e={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#x2F;":"/"};return this.replace(/&[^;]+;/g,(function(t){return e[t]}))},String.prototype.getQuery=function(e){let t={};return decodeURIComponent(this).replace(/&amp;/g,"&").replace(/[?&]+([^=&]+)=([^&]*)/g,(function(e,r,n){t[r]=n})),e?t[e]||"":t},String.prototype.setQuery=function(){let e=arguments,t=e.length;const r=decodeURIComponent(this).replace(/&amp;/g,"&");if(0===t)return r;"object"==typeof e[0]&&(e=e[0],t=e.length);let n,o=""!==e[0]?r.getQuery():{},i=[];for(var a=""===e[0]?1:0;a<t;a+=2)o[e[a]]=e[a+1];for(var c in o)o.hasOwnProperty(c)&&(n=String(o[c]).trim())&&i.push(c+"="+n);let p=r.indexOf("?"),l=-1==p?r:r.substr(0,p);return"/"!=l.substr(-1,1)&&(l+="/"),l+(i.length>0?"?"+i.join("&"):"")},String.prototype.rawurlencode=function(){return encodeURIComponent(this).replace(/[!\"'()*~]/g,(e=>"%"+e.charCodeAt(0).toString(16).toUpperCase()))},String.prototype.rawurldecode=function(){return decodeURIComponent(this.replace(/%(21|22|27|28|29|2A|7E)/g,(e=>String.fromCharCode(parseInt(e.slice(1),16)))))},String.prototype.encode64=function(){return btoa(this.rawurlencode()).replace(/[=\/]/g,(e=>"%"+e.charCodeAt(0).toString(16)))},String.prototype.decode64=function(){return atob(this.replace(/%(3d|2f)/g,(e=>String.fromCharCode(parseInt(e.slice(1),16))))).rawurldecode()},HTMLFormElement.prototype.serializeArray=function(){let e=[];return Array.prototype.slice.call(this.elements).forEach((function(t){!t.name||t.disabled||["file","reset","submit","button"].indexOf(t.type)>-1||("select-multiple"!==t.type?["checkbox","radio"].indexOf(t.type)>-1&&!t.checked||e.push({name:t.name,value:t.value}):Array.prototype.slice.call(t.options).forEach((function(r){r.selected&&e.push({name:t.name,value:r.value})})))})),e},HTMLFormElement.prototype.dataExport=function(){let e,t,r={},n=this.serializeArray();for(let o in n)e=n[o].name,t=n[o].value,"[]"===e.substring(e.length-2)?(e=e.slice(0,-2),Array.isArray(r[e])||(r[e]=[]),r[e][r[e].length]=t):r[e]=t;return r},HTMLFormElement.prototype.dataImport=function(e){let t;for(let r in e)t=this.elements[r],t&&t.name&&("INPUT"==t.tagName?"file"==t.type||("checkbox"==t.type?t.checked=1==e[r]:"radio"==t.type?(t=t.find((t=>t.value===e[r])))&&(t.checked=!0):t.value="0"==e[r]?"":e[r]):["select","textarea"].indexOf(t.type)>-1&&(t.value=e[r]))},HTMLElement.prototype.fadeOut=function(e,t=50){let r=this,n=1;r.timer=setInterval((()=>{n-=.1,r.style.opacity=n,n<=0&&(clearInterval(r.timer),e(r))}),t)},HTMLElement.prototype.fadeIn=function(e,t=50){let r=this,n=0;r.timer=setInterval((()=>{n+=.1,r.style.opacity=n,n>=1&&(clearInterval(r.timer),e(r))}),t)},window.set_cookie=function(e,t,r=0){document.cookie=e.encode64()+"="+t.encode64()+"; path=/; Domain="+(_AF_COOKIE_DOMAIN_||"")+"; max-age="+(r||31536e3)},window.get_cookie=function(e,t=!1){let r,n,o=e.encode64();const i=document.cookie.split(";");for(let a=0;a<i.length;a++)if(r=i[a].slice(0,i[a].indexOf("=")),n=i[a].slice(i[a].indexOf("=")+1),r=r.replace(/^\s+|\s+$/g,""),r==o)return t&&set_cookie(e,"",-1),n.rawurldecode().decode64()},window._AF_COOKIE_DOMAIN_=get_cookie("_AF_COOKIE_DOMAIN_"),window.exec_ajax=async function(e,t={}){const r={method:"POST",headers:{"Content-Type":"application/json",...t},body:JSON.stringify(e)},n=await fetch(request_uri,r),o=await n.json();if(!n.ok||0!==(o?.error||0))throw Error(o?.message||o);return o},window.load_script=function(e,t,r,n){return new Promise(((o,i)=>{let a=document.createElement("script");const c=t||document.getElementsByTagName("script")[0];function p(e,t){(t||!a.readyState||/loaded|complete/.test(a.readyState))&&(a.onload=null,a.onreadystatechange=null,a=void 0,t?i():o())}a.async=r||!0,a.defer=n||!0,a.onload=p,a.onreadystatechange=p,a.src=e,c.parentNode.insertBefore(a,c.nextSibling)}))},window.pop_win=function(e,t,r,n){const o=window.open(e,n||"afox_popup","width="+(t||"700")+",height="+(r||"500")+",top=50,left=50,scrollbars=yes,toolbar=no,menubar=no,location=no");return o.focus(),o}})();