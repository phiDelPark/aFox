!function(a){"use strict";var b='<form action="%s" class="input-password" method="post" autocomplete="off"><div class="form-inline"><div>%s</div><input class="form-control" name="mb_password" type="password" placeholder="%s" style="width:150px" required> <button class="btn btn-primary" type="submit">%s</button> <button class="btn btn-default" type="button">%s</button></div></form>',c='<form action="%s" class="input-group" method="post" autocomplete="off"><div><div>%s</div><button class="btn btn-primary" type="submit">%s</button> <button class="btn btn-default" type="button">%s</button></div></form>';a("[data-exec-act]").click(function(){var d={},e=a(this),f=e.attr("data-exec-act"),g=e.attr("data-act-param");if(!g)return!1;g=g.split(",");for(var h=0,i=g.length;i>h;h+=2)d[g[h]]=g[h+1];var j=e.closest("#board_reply"),k=e.closest(".reply-item"),l=e.attr("data-act-password")||"";j.find("form.right").remove().end().find(".reply-item>.right").show();var m=j.find('[data-exec-ajax="board.updateComment"]').clone().hide(),n=m.find(".af_editor_rp_content").afEditor();m.find(".form-group").show(),m.find('[disabled="disabled"]').removeAttr("disabled");var o=function(b,c,d){if("success"==b){a('<input type="hidden" name="rp_srl" value="">').prependTo(m);var e=k.find(">.right");return m[0].dataImport(c),m.addClass("right").find(".close").show().click(function(){e.show("fast",function(){m.remove()})}).end().insertAfter(e.hide("slow")).show("slow"),m.find(".btn-success").removeClass("btn-success").addClass("btn-info"),2==c.rp_type&&n["switch"](!0),!1}};if("board.deleteComment"==f||"board.getComment"==f&&l){var p,q=encodeURI(current_url.setQuery("rp",""));l?"board.getComment"==f?(p=a(b.sprintf("",$_LANG.warn_input.sprintf($_LANG.password),$_LANG.password,$_LANG.ok,$_LANG.close)),p.on("success.exec.ajax",function(a,b,c){a.preventDefault(),o("success",b,c)})):p=a(b.sprintf("",$_LANG.confirm_select_delete.sprintf($_LANG.comment),$_LANG.password,$_LANG.ok,$_LANG.close)):p=a(c.sprintf("",$_LANG.confirm_select_delete.sprintf($_LANG.comment),$_LANG.yes,$_LANG.no)),p.hide().addClass("inside_massage_box").prependTo(k.find(">.right")).fadeIn("slow"),p.find("button.btn-default").click(function(){p.fadeOut("slow",function(){a(this).remove()})}),p.attr("data-exec-ajax",f),p.prepend('<input type="hidden" name="rp_srl" value="'+d.rp_srl+'">'),p.prepend('<input type="hidden" name="success_return_url" value="'+q+'">'),p.addClass("inside_massage_box").prependTo(k.find(">.right")).fadeIn("slow")}else"board.getComment"!=f&&"board.updateComment"!=f||("board.getComment"==f?exec_ajax(f,d,o):(n["switch"](!1),a('<input type="hidden" name="rp_parent" value="">').prependTo(m),m[0].dataImport({rp_type:1,rp_secret:0,rp_content:"",rp_parent:d.rp_parent}),m.addClass("right").insertAfter(k.find(">.right")).show("slow")),m.on("success.exec.ajax",function(a,b,c){a.preventDefault(),b.redirect_url&&parent.location.replace(b.redirect_url.setQuery("rp",b.rp_srl))}));return!1}),a('[data-exec-ajax="board.updateDocument"],[data-exec-ajax="board.updateComment"]').on("success.exec.ajax",function(b,c,d){b.preventDefault();var e="board.updateDocument"==a(this).attr("data-exec-ajax");c.redirect_url&&parent.location.replace(c.redirect_url.setQuery(e?"srl":"rp",c[e?"wr_srl":"rp_srl"]))}),a(document).on("change.af.editor.toolbar",".af-editor-toolbar",function(b,c,d,e){var f=a(this).closest(".af-editor-group");"wr_type"!=c&&"rp_type"!=c||1!=f.length||f.data("af.editor")["switch"]("2"===e)}),a(".auto-hide").each(function(){var b=a(this),c=(b.attr("data-timer")||"5")-1,d=b.find(".timer-progress")||0,e=d.attr("data-repeat-char")||"*",f=c,g=0,h=function(){var a=e.repeat(f);return a=a+"<u>"+e+"</u>"+e.repeat(c-f)};d&&d.html(h()),g=setInterval(function(){1>f?(clearInterval(g),b.animate({bottom:"-=70"},1e3,function(){a(this).remove()})):(f--,d&&d.html(h()))},1e3)}),a(".list-table tr[data-hot-track]").click(function(){var b=a(".wr_title a",this).attr("href");return location.href=b,!1}),a(window).on("load",function(){var b=a("a.active[id^=reply_]")[0];b&&b.scrollIntoView(!0)})}(jQuery);