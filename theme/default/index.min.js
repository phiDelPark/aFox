(()=>{"use strict";const e=()=>localStorage.getItem("theme"),t=()=>{const t=e();return t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},a=e=>{"auto"===e&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.setAttribute("data-bs-theme","dark"):document.documentElement.setAttribute("data-bs-theme",e)};a(t());const r=(e,t=!1)=>{const a=document.querySelector("#bd-theme");if(!a)return;const r=document.querySelector("#bd-theme-text"),o=document.querySelector(".theme-icon-active use"),c=document.querySelector(`[data-bs-theme-value="${e}"]`),n=c.querySelector("svg use").getAttribute("href");document.querySelectorAll("[data-bs-theme-value]").forEach((e=>{e.classList.remove("active"),e.setAttribute("aria-pressed","false")})),c.classList.add("active"),c.setAttribute("aria-pressed","true"),o.setAttribute("href",n);const s=`${r.textContent} (${c.dataset.bsThemeValue})`;a.setAttribute("aria-label",s),t&&a.focus()};window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(()=>{const r=e();"light"!==r&&"dark"!==r&&a(t())})),window.addEventListener("DOMContentLoaded",(()=>{r(t()),document.querySelectorAll("[data-bs-theme-value]").forEach((e=>{e.addEventListener("click",(()=>{const t=e.getAttribute("data-bs-theme-value");(e=>{localStorage.setItem("theme",e)})(t),a(t),r(t,!0)}))})),window.current_content=document.querySelector(".current_content")})),window.addEventListener("load",(()=>{document.querySelector("#afoxPageLoading")?.fadeOut((e=>e.remove())),document.querySelector("main.container")?.querySelectorAll("[exec-ajax]")?.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation();const a=e.getAttribute("exec-ajax"),r=a.substring(0,a.indexOf("&")).split(".");let o=e.getAttribute("success-url"),c=e.getAttribute("error-url");const n={module:r[0],act:r[1],...a.getQuery()};exec_ajax(n).then((e=>{o&&(o=o.split("#"),location.href=o[0],o[1]&&set_cookie("location.hash",o[1],1))})).catch((e=>{alert(e.message),c&&(location.href=c)}))}))}));const e=get_cookie("location.hash",!0);e&&(location.hash=e)}))})();