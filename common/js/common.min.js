if("undefined"==typeof bootstrap)throw document.getElementById("defBootstrapJS")||parent.location.replace(request_uri+"?cdnerr=bootstrap"),new Error("aFox's JavaScript requires Bootstrap 5");const $_LANG={};(()=>{"use strict";String.prototype.toUcFirst=function(){return this.charAt(0).toUpperCase()+this.slice(1).toLowerCase()},String.prototype.escapeMKDW=function(e){const t=!1===e?/[\`\[\]]/g:/[\\\`\*\_\{\}\[\]\(\)\>\#\+\-\.\!]/g;return this.replace(t,(e=>"\\"+e))},String.prototype.escapeHTML=function(){const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return this.replace(/[&<>"'\/]/g,(t=>e[t]))},String.prototype.unescapeHTML=function(){const e={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#x2F;":"/"};return this.replace(/&[^;]+;/g,(t=>e[t]))},String.prototype.rawurlencode=function(){return encodeURIComponent(this).replace(/[!\"'()*~]/g,(e=>"%"+e.charCodeAt(0).toString(16).toUpperCase()))},String.prototype.rawurldecode=function(){return decodeURIComponent(this.replace(/%(21|22|27|28|29|2A|7E)/g,(e=>String.fromCharCode(parseInt(e.slice(1),16)))))},String.prototype.encode64=function(){return btoa(this.rawurlencode()).replace(/[=\/]/g,(e=>"%"+e.charCodeAt(0).toString(16)))},String.prototype.decode64=function(){return atob(this.replace(/%(3d|2f)/g,(e=>String.fromCharCode(parseInt(e.slice(1),16))))).rawurldecode()},String.prototype.getQuery=function(e){let t={};return decodeURIComponent(this).replace(/&amp;/g,"&").replace(/[?&]+([^=&]+)=([^&]*)/g,((e,r,o)=>{t[r]=o})),e?t[e]||"":t},String.prototype.setQuery=function(){let e,t=arguments;t="object"==typeof t[0]?t[0]:t;const r=decodeURIComponent(this).replace(/&amp;/g,"&");if(0===(e=t.length))return r;let o,n=""!=t[0]?r.getQuery():{},i=[];for(let r=""==t[0]?1:0;r<e;r+=2)n[t[r]]=t[r+1];for(let e in n)n.hasOwnProperty(e)&&(o=String(n[e]).trim())&&i.push(e+"="+o);let a=r.indexOf("?"),c=-1==a?r:r.slice(0,a);return c+("/"==c.slice(-1)?"":"/")+(i.length>0?"?"+i.join("&"):"")},String.prototype.sprintf=function(){let e=this,t=arguments;t="object"==typeof t[0]?t[0]:t;for(let r=0,o=t.length;r<o;r++)e=e.replace(/%([0-9]?)(s|d)/,((e,o,n)=>t[r].padStart(Number(o||0),"d"==n?"0":"_")));return e},Number.prototype.shortFileSize=function(){let e=this,t=0;for(;e>1024;)e/=1024,t++;return e.toFixed(1)+(["B","K","M","G","T"].at(t)||"?")},HTMLElement.prototype.fadeIn=function(e,t=50){let r=this,o=0;clearInterval(r.timer),r.style.opacity=o,e(r),r.timer=setInterval((()=>{o+=.1,r.style.opacity=o,o>=1&&clearInterval(r.timer)}),t)},HTMLElement.prototype.fadeOut=function(e,t=50){let r=this,o=1;clearInterval(r.timer),r.timer=setInterval((()=>{o-=.1,r.style.opacity=o,o<=0&&(clearInterval(r.timer),e(r))}),t)},HTMLFormElement.prototype.serializeObject=function(e={}){return Array.prototype.slice.call(this.elements).forEach((t=>{!t.name||t.disabled||["file"].indexOf(t.type)>-1||("select-multiple"!==t.type?["checkbox","radio"].indexOf(t.type)>-1&&!t.checked||e.push({name:t.name,value:t.value}):Array.prototype.slice.call(t.options).forEach((r=>{r.selected&&e.push({name:t.name,value:r.value})})))})),e},HTMLFormElement.prototype.serializeArray=function(e=[]){return Array.prototype.slice.call(this.elements).forEach((t=>{!t.name||t.disabled||["file"].indexOf(t.type)>-1||("[]"==t.name.slice(-2)&&(t.name=t.name.slice(0,-2)),"select-multiple"!==t.type?["checkbox","radio"].indexOf(t.type)>-1&&!t.checked||(e[t.name]=(e[t.name]?e[t.name]+",":"")+t.value):Array.prototype.slice.call(t.options).forEach((r=>{r.selected&&(e[t.name]=(e[t.name]?e[t.name]+",":"")+r.value)})))})),e},window.nl2br=function(e,t){return e.replace(/\r\n|\n\r|\r|\n/g,t||"<br>")},window.strip_tags=function(e,t){t=(((t||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");return e.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,"").replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,((e,r)=>t.indexOf("<"+r.toLowerCase()+">")>-1?e:""))},window.set_cookie=function(e,t,r=0){const o=new Date;o.setTime(o.getTime()+r);const n=r?";expires="+o.toUTCString():"";document.cookie=e.encode64()+"="+t.encode64()+n+";path=/;"+(_AF_COOKIE_DOMAIN_||"")?"Domain="+_AF_COOKIE_DOMAIN_:""},window.get_cookie=function(e){let t,r,o=e.encode64();const n=document.cookie.split(";");for(let e=0,i=n.length;e<i;e++)if(t=n[e].slice(0,n[e].indexOf("=")),r=n[e].slice(n[e].indexOf("=")+1),t=t.replace(/^\s+|\s+$/g,""),t==o)return r.rawurldecode().decode64()},window._AF_COOKIE_DOMAIN_=get_cookie("_AF_COOKIE_DOMAIN_"),window.exec_ajax=async function(e,t={}){const r=document.createElement("DIV");r.setAttribute("id","calling_server"),r.setAttribute("class","alert alert-warning"),r.innerText=$_LANG.calling_server,document.body.insertBefore(r,document.body.firstChild);const o={method:"POST",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json",Accept:"application/json, text/javascript",...t},body:JSON.stringify(e)},n=await fetch(request_uri,o),i=await n.json();if(r?.fadeOut((e=>e.remove())),!n.ok||0!==(i?.error||0))throw Error(i?.message);return i},window.load_script=function(e,t,r,o){return new Promise(((n,i)=>{let a=document.createElement("script");const c=t||document.getElementsByTagName("script")[0];a.async=r||!0,a.defer=o||!0;a.onload=a.onreadystatechange=(e,t)=>{(t||!a.readyState||/loaded|complete/.test(a.readyState))&&(a.onload=null,a.onreadystatechange=null,a=void 0,t?i():n())},a.src=e,c.parentNode.insertBefore(a,c.nextSibling)}))},window.pop_win=function(e,t,r,o){const n=window.open(e,o||"afox_popup","width="+(t||"700")+",height="+(r||"500")+",top=50,left=50,scrollbars=yes,toolbar=no,menubar=no,location=no");return n.focus(),n}})();