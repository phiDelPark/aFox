(()=>{"use strict";const e=()=>localStorage.getItem("theme"),t=()=>{const t=e();return t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},r=e=>{"auto"===e&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.setAttribute("data-bs-theme","dark"):document.documentElement.setAttribute("data-bs-theme",e)};r(t());const o=(e,t=!1)=>{const r=document.querySelector("#bd-theme");if(!r)return;const o=document.querySelector("#bd-theme-text"),c=document.querySelector(".theme-icon-active use"),n=document.querySelector(`[data-bs-theme-value="${e}"]`),a=n.querySelector("svg use").getAttribute("href");document.querySelectorAll("[data-bs-theme-value]").forEach((e=>{e.classList.remove("active"),e.setAttribute("aria-pressed","false")})),n.classList.add("active"),n.setAttribute("aria-pressed","true"),c.setAttribute("href",a);const s=`${o.textContent} (${n.dataset.bsThemeValue})`;r.setAttribute("aria-label",s),t&&r.focus()};window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(()=>{const o=e();"light"!==o&&"dark"!==o&&r(t())})),window.addEventListener("DOMContentLoaded",(()=>{o(t()),document.querySelectorAll("[data-bs-theme-value]").forEach((e=>{e.addEventListener("click",(()=>{const t=e.getAttribute("data-bs-theme-value");(e=>{localStorage.setItem("theme",e)})(t),r(t),o(t,!0)}))})),window.current_content=document.querySelector(".current_content");const e=document.querySelector("#quickLink li"),c=window.current_content.querySelectorAll("h1,h2");for(let t=c.length-1;t>-1;t--){if(!c[t].innerText||c.length-t>22)continue;const r=document.createElement("LI");r.innerHTML=e.innerHTML;const o=r.querySelector("a"),n=o.querySelector("svg");c[t].id="quickLink_"+t,o.href="#"+c[t].id,o.innerHTML=n.outerHTML+c[t].innerText,e.after(r)}})),window.addEventListener("load",(()=>{document.querySelector("#afoxPageLoading")?.fadeOut((e=>e.remove())),document.querySelector("main.container")?.querySelectorAll("[exec-ajax]")?.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation();const r=e.getAttribute("exec-ajax"),o=r.substring(0,r.indexOf("&")).split(".");let c=e.getAttribute("success-url"),n=e.getAttribute("error-url");const a={module:o[0],act:o[1],...r.getQuery()};exec_ajax(a).then((e=>{c&&(c=c.split("#"),location.href=c[0],c[1]&&set_cookie("location.hash",c[1],1))})).catch((e=>{alert(e.message),n&&(location.href=n)}))}))}));const e=get_cookie("location.hash",!0);e&&(location.hash=e)}))})();