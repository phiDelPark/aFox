!function(a){"use strict";var b='<form action="%s" class="input-password" method="post" autocomplete="off"><div class="form-inline"><div>%s</div><input class="form-control" name="mb_password" type="password" placeholder="%s" style="width:150px" required> <button class="btn btn-primary" type="submit">%s</button> <button class="btn btn-default" type="button">%s</button></div></form>';a("[data-exec-act]").click(function(){var c={},d=a(this),e=d.attr("data-exec-act"),f=d.attr("data-act-param");if(!f)return!1;f=f.split(",");for(var g=0,h=f.length;g<h;g+=2)c[f[g]]=f[g+1];var i=d.closest("#board_reply"),j=d.closest(".reply-item"),k=d.attr("data-act-password")||"";i.find("form.right").remove().end().find(".reply-item>.right").show();var l=i.find('[data-exec-ajax="board.updateComment"]').clone().hide(),m=l.find(".af_editor_rp_content").afEditor();l.find(".form-group").show(),l.find('[disabled="disabled"]').removeAttr("disabled");var n=function(b,c,d){if("success"==b){a('<input type="hidden" name="rp_srl" value="">').prependTo(l);var e=j.find(">.right");return l[0].dataImport(c),l.addClass("right").find(".close").show().click(function(){e.show("fast",function(){l.remove()})}).end().insertAfter(e.hide("slow")).show("slow"),l.find(".btn-success").removeClass("btn-success").addClass("btn-info"),2==c.rp_type&&m.switch(!0),j[0].scrollIntoView(!0),!1}};if("board.deleteComment"==e||"board.getComment"==e&&k){var o,p=encodeURI(current_url.setQuery("rp",""));if(j.find(">>.inside_massage_box").length>0)return;k?"board.getComment"==e?(o=a(b.sprintf("",$_LANG.request_input.sprintf($_LANG.password),$_LANG.password,$_LANG.ok,$_LANG.close)),o.on("success.exec.ajax",function(a,b,c){a.preventDefault(),n("success",b)})):o=a(b.sprintf("",$_LANG.confirm_select_delete.sprintf($_LANG.comment),$_LANG.password,$_LANG.ok,$_LANG.close)):o=a('<form action="%s" class="input-group" method="post" autocomplete="off"><div><div>%s</div><button class="btn btn-primary" type="submit">%s</button> <button class="btn btn-default" type="button">%s</button></div></form>'.sprintf("",$_LANG.confirm_select_delete.sprintf($_LANG.comment),$_LANG.yes,$_LANG.no)),o.hide().addClass("inside_massage_box").prependTo(j.find(">.right")).fadeIn("slow"),o.find("button.btn-default").click(function(){o.fadeOut("slow",function(){a(this).remove()})}).focus(),o.attr("data-exec-ajax",e),o.prepend('<input type="hidden" name="rp_srl" value="'+c.rp_srl+'">'),o.prepend('<input type="hidden" name="success_return_url" value="'+p+'">'),o.addClass("inside_massage_box").prependTo(j.find(">.right")).fadeIn("slow")}else"board.getComment"!=e&&"board.updateComment"!=e||("board.getComment"==e?exec_ajax(e,c,n):(m.switch(!1),a('<input type="hidden" name="rp_parent" value="">').prependTo(l),l[0].dataImport({rp_type:1,rp_secret:0,rp_content:"",rp_parent:c.rp_parent}),l.addClass("right").insertAfter(j.find(">.right")).show("slow")),l.on("success.exec.ajax",function(a,b,c){a.preventDefault(),b.redirect_url&&parent.location.replace(b.redirect_url.setQuery("rp",b.rp_srl))}));return!1}),a('[data-exec-ajax="board.updateDocument"],[data-exec-ajax="board.updateComment"]').on("success.exec.ajax",function(b,c,d){b.preventDefault();var e="board.updateDocument"==a(this).attr("data-exec-ajax");c.redirect_url&&parent.location.replace(c.redirect_url.setQuery(e?"srl":"rp",c[e?"wr_srl":"rp_srl"]))}),a(document).on("change.af.editor.toolbar",".af-editor-toolbar",function(b,c,d,e){var f=a(this).closest(".af-editor-group");"wr_type"!=c&&"rp_type"!=c||1!=f.length||f.data("af.editor").switch("2"===e)}),a(".auto-hide").each(function(){var b=a(this),c=(b.attr("data-timer")||"5")-1,d=b.find(".timer-progress")||0,e=d.attr("data-repeat-char")||"*",f=c,g=0,h=function(){var a=e.repeat(f);return a=a+"<u>"+e+"</u>"+e.repeat(c-f)};d&&d.html(h()),g=setInterval(function(){f<1?(clearInterval(g),b.animate({bottom:"-=70"},1e3,function(){a(this).remove()})):(f--,d&&d.html(h()))},1e3)}),a(".list-table tr[data-hot-track]").click(function(){var b=a(".wr_title a",this).attr("href");return location.href=b,!1}),a(window).on("load",function(){var b=a("a.active[id^=reply_]")[0];b&&b.scrollIntoView(!0)})}(jQuery);