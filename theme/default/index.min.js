!function(i){"use strict";i(window).on('load',function(){var e='<form action="%s" method="post" autocomplete="off"><div class="form-group"><input type="text" class="form-control" name="mb_id" minlength="2" maxlength="20" placeholder="%s" required></div><div class="form-group"><input type="password" class="form-control" name="mb_password" placeholder="%s" required></div><div class="captcha-group" style="display:none"></div><label class="checkbox" tabindex="0"><input type="checkbox" name="auto_login" value="1"><span class="cr"><i class="cr-icon glyphicon glyphicon-ok"></i></span> %s</label><p></p><button type="submit" style="display:none">button</button></form>',n='<div class="captcha-group clearfix"><div class="form-group pull-left"><img src="%s" alt="CAPTCHA code" width="162" height="77"></div><div class="form-group pull-right"><input type="text" class="form-control" placeholder="%s" name="captcha_code" required></div></div>'.sprintf("./common/img/loader.gif",$_LANG.captcha_code);function o(i){exec_ajax("member.getCaptcha",{},function(e,n,o){return"success"===e?(i.find(">.captcha-group img").attr("src","./lib/"+n.src),!1):"error"===e?(i.find(">p").html($_LANG.error+": "+n.message).css("color","red"),!1):void 0})}i('a[href="#loginForm"]').offOn("click",function(){var a="1"==(i(this).attr("captcha")||"0");return e=e.sprintf(current_url,$_LANG.id,$_LANG.password,$_LANG.auto_login),msg_box(e,$_LANG.login,["question",["cancel","OK"]],function(i,e){if("show"==i){var t=e.closest('[aria-labelledby="afMsgBox"]');if(t.find(".modal-header .glyphicon").removeClass().addClass("glyphicon glyphicon-user"),t.find('.modal-footer [data-key="ok"]').text($_LANG.login),t.find(".modal-footer").prepend('<div class="pull-left"><a href="'+request_uri+'?module=member&disp=signUp"><strong>'+$_LANG.member_signup+'</strong></a> / <a href="'+request_uri+'?module=member&disp=findAccount">'+$_LANG.member_find+"</a></div>"),a)o(e.find("form")),e.find("form").find(">.captcha-group").html(n).show()}else{if("ok"!=i)return!0;var r=e.find("form");r.offOn("submit",function(){var i={};return i.mb_id=r.find('input[name="mb_id"]').val(),i.mb_password=r.find('input[name="mb_password"]').val(),i.auto_login=r.find('input[name="auto_login"]').is(":checked"),r.find('input[name="captcha_code"]').length>0&&(i.captcha_code=r.find('input[name="captcha_code"]').val()),exec_ajax("member.loginCheck",i,function(i,e,a){if("success"===i)return location.href=r.attr("action"),!1;if("error"===i){if("4001"==e.error)o(r),r.find(">.captcha-group").html(n).show();return r.find(">p").html($_LANG.error+": "+e.message).css("color","red"),r.find('input[name="captcha_code"]').val(""),r.find('input[name="mb_password"]').val(""),r.find('input[name="mb_id"]').focus(),!1}}),!1}),r.find('button[type="submit"]').click()}return!1}),!1}),i('aside[role="menu"]:eq(0)').each(function(){var e=i(this);e.find("a.hidden-md").offOn("click",function(){var n=e.find(".list-group.hidden-xs");n.length>0?n.addClass("collapse").removeClass("hidden-xs hidden-sm").animate({height:"toggle"},function(){i(this).addClass("in").removeAttr("style")}):e.find(".list-group.collapse.in").animate({height:"toggle"},function(){i(this).addClass("hidden-xs hidden-sm").removeClass("collapse in").removeAttr("style")})})}),i("#af_md_config").each(function(){var e=i(this),n=e.find(".btn-toggle");n.find(".glyphicon-ok").offOn("click",function(){!0===confirm($_LANG.confirm_save.sprintf($_LANG.setup))&&e.find("form[data-exec-ajax]:eq(0)").submit()}),n.find(".glyphicon-cog").offOn("click",function(){var i=e.find(".config-area").width(),n=e.find("#config_menus").width();e.find(".config-area").animate({width:0!=i?0:n})}),e.find("#config_menus li>a:first-child").offOn("click",function(){var n=i(this).parent().find(">div");return"none"==n.css("display")&&(e.find("#config_menus li>div").hide(),n.animate({height:"toggle"})),!1})}),i('[aria-labelledby="afPageLoader"]').fadeOut("slow")})}(jQuery);