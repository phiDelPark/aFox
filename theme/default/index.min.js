(()=>{"use strict";const e=()=>localStorage.getItem("theme"),t=()=>{const t=e();return t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},r=e=>{"auto"===e&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.setAttribute("data-bs-theme","dark"):document.documentElement.setAttribute("data-bs-theme",e)};r(t());const o=(e,t=!1)=>{const r=document.querySelector("#theme-color-modes");if(!r)return;const o=document.querySelector("#theme-color-modes-text"),a=document.querySelector(".theme-icon-active use"),n=document.querySelector(`[data-bs-theme-value="${e}"]`),c=n.querySelector("svg use").getAttribute("href");document.querySelectorAll("[data-bs-theme-value]").forEach((e=>{e.classList.remove("active"),e.setAttribute("aria-pressed","false")})),n.classList.add("active"),n.setAttribute("aria-pressed","true"),a.setAttribute("href",c);const s=`${o.textContent} (${n.dataset.bsThemeValue})`;r.setAttribute("aria-label",s),t&&r.focus()};window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(()=>{const o=e();"light"!==o&&"dark"!==o&&r(t())})),window.addEventListener("DOMContentLoaded",(()=>{o(t()),document.querySelectorAll("[data-bs-theme-value]").forEach((e=>{e.addEventListener("click",(()=>{const t=e.getAttribute("data-bs-theme-value");(e=>{localStorage.setItem("theme",e)})(t),r(t),o(t,!0)}))}));const e=document.querySelector("#quickLink li");if(e){const t=document.querySelectorAll(".current_content h1,.current_content h2");for(let r=t.length-1;r>-1;r--){if(!t[r].innerText||t.length-r>22)continue;const o=document.createElement("LI");o.innerHTML=e.innerHTML;const a=o.querySelector("a"),n=a.querySelector("svg");t[r].id="quickLink_"+r,a.href="#"+t[r].id,a.innerHTML=n.outerHTML+t[r].innerText,e.after(o)}}})),window.addEventListener("load",(()=>{document.querySelector("#afoxPageLoading")?.fadeOut((e=>e.remove()));const e=document.querySelector("#themeContentModal");e.addEventListener("show.bs.modal",(e=>{const t=e.target.querySelector(".modal-title"),r=e.target.querySelector(".modal-body"),o=e.relatedTarget.dataset.ajaxAction.split("."),a=e.relatedTarget.dataset.ajaxResponses.split(","),n={module:o[0],act:o[1],response_tags:a,...e.relatedTarget.href.getQuery()};exec_ajax(n).then((e=>{t.innerHTML=e.wr_title,r.innerHTML=e.wr_content})).catch((e=>{r.innerHTML=e.message}))})),e.addEventListener("hide.bs.modal",(e=>{e.target.querySelector(".modal-title").innerHTML="",e.target.querySelector(".modal-body").innerHTML=""}));const t=get_cookie("location.hash",!0);t&&(location.hash=t)}))})();