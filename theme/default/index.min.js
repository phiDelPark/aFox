!function(e){"use strict";e(window).load(function(){function o(e){exec_ajax("member.getCaptcha",{},function(o,a,r){return"success"===o?(e.find(">.captcha-group img").attr("src","./lib/"+a.src),!1):"error"===o?(e.find(">p").html($_LANG.error+": "+a.message).css("color","red"),!1):void 0})}var a='<form action="%s" method="post" autocomplete="off"><div class="form-group"><input type="text" class="form-control" name="mb_id" maxlength="20" placeholder="%s" pattern="^[a-zA-Z]+\\w{2,}$" required></div><div class="form-group"><input type="password" class="form-control" name="mb_password" placeholder="%s" required></div><div class="captcha-group" style="display:none"></div><label class="checkbox" tabindex="0"><input type="checkbox" name="auto_login" value="1"><span class="cr"><i class="cr-icon glyphicon glyphicon-ok"></i></span> %s</label><p></p><button type="submit" style="display:none">button</button></form>',r='<div class="captcha-group clearfix"><div class="form-group pull-left"><img src="%s" alt="CAPTCHA code" width="162" height="77"></div><div class="form-group pull-right"><input type="text" class="form-control" placeholder="%s" name="captcha_code" required></div></div>'.sprintf("./common/img/loader2.gif",$_LANG.captcha_code);e('a[href="#loginForm"]').offOn("click",function(){var i="1"==(e(this).attr("captcha")||"0");return a=a.sprintf(current_url,$_LANG.id,$_LANG.password,$_LANG.auto_login),msg_box(a,$_LANG.login,["question",["cancel","OK"]],function(e,a){if("show"==e){var n=a.closest('[aria-labelledby="afMsgBox"]');n.find(".modal-header .glyphicon").removeClass().addClass("glyphicon glyphicon-user"),n.find('.modal-footer [data-key="ok"]').text($_LANG.login),n.find(".modal-footer").prepend('<div class="pull-left"><a href="'+request_uri+'?module=member&disp=signUp"><strong>'+$_LANG.member_signup+'</strong></a> / <a href="'+request_uri+'?module=member&disp=findAccount">'+$_LANG.member_find+"</a></div>"),i&&(o(a.find("form")),a.find("form").find(">.captcha-group").html(r).show())}else{if("ok"!=e)return!0;var t=a.find("form");t.offOn("submit",function(){var e={};return e.mb_id=t.find('input[name="mb_id"]').val(),e.mb_password=t.find('input[name="mb_password"]').val(),e.auto_login=t.find('input[name="auto_login"]').is(":checked"),t.find('input[name="captcha_code"]').length>0&&(e.captcha_code=t.find('input[name="captcha_code"]').val()),exec_ajax("member.loginCheck",e,function(e,a,i){return"success"===e?(location.href=t.attr("action"),!1):"error"===e?("4001"==a.error&&(o(t),t.find(">.captcha-group").html(r).show()),t.find(">p").html($_LANG.error+": "+a.message).css("color","red"),t.find('input[name="captcha_code"]').val(""),t.find('input[name="mb_password"]').val(""),t.find('input[name="mb_id"]').focus(),!1):void 0}),!1}),t.find('button[type="submit"]').click()}return!1}),!1}),e('[aria-labelledby="afPageLoader"]').fadeOut("slow")})}(jQuery);