(()=>{"use strict";const e=()=>localStorage.getItem("theme"),t=()=>{const t=e();return t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},r=e=>{"auto"===e&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.setAttribute("data-bs-theme","dark"):document.documentElement.setAttribute("data-bs-theme",e)};r(t());const a=e=>{const t=document.querySelector("[data-bs-theme-value]");t&&t.setAttribute("data-bs-theme-value","dark"==e?"dark":"light")};window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(()=>{const a=e();"light"!==a&&"dark"!==a&&r(t())})),window.addEventListener("DOMContentLoaded",(()=>{a(t()),document.querySelector("[data-bs-theme-value]").addEventListener("click",(e=>{let t=e.target.getAttribute("data-bs-theme-value");t="dark"==t?"light":"dark",(e=>{localStorage.setItem("theme",e)})(t),r(t),a(t)}));const e=document.querySelector("#quickLink li");if(e){const t=document.querySelectorAll(".current_content h1,.current_content h2");for(let r=t.length-1;r>-1;r--){if(!t[r].innerText||t.length-r>22)continue;const a=document.createElement("LI");a.innerHTML=e.innerHTML;const n=a.querySelector("a"),o=n.querySelector("svg");t[r].id="quickLink_"+r,n.href="#"+t[r].id,n.innerHTML=o.outerHTML+t[r].innerText,e.after(a)}}})),window.addEventListener("load",(()=>{document.querySelector("#loading_page")?.fadeOut((e=>e.remove())),document.querySelector("#documentList.gallery .list-group")?.addEventListener("contextmenu",(e=>{e.preventDefault(),e.stopPropagation();const t=e.target.closest("a")||e.target;t?.href&&(location.href=t.href)})),document.querySelector("#galleryContentModal")?.addEventListener("show.bs.modal",(e=>{const t=e.target.querySelector(".carousel-inner"),r=e.relatedTarget.href.getQuery(),a=e.relatedTarget.querySelector("img")?.src.getQuery("file");exec_ajax({module:"board",act:"getFileList",md_id:r.id,mf_target:r.srl}).then((e=>{let r="";e.forEach((e=>{r+='<div class="carousel-item%s">%s<img src="%s" class="d-block w-100" alt="%s"></div>'.sprintf(a==e.mf_srl?" active":"","<h6>"+(e.mf_name||"")+", "+(e.mf_regdate||"")+"</h6>","./?file="+e.mf_srl,e.mf_name)})),t.innerHTML=r})).catch((e=>{}))}))}))})();